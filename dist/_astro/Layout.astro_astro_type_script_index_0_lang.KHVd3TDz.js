const s=document.getElementById("particle-canvas"),c=s.getContext("2d");let i=[],p=0,f=0;function w(){s.width=window.innerWidth,s.height=window.innerHeight}class T{constructor(){this.reset()}reset(){this.x=Math.random()*s.width,this.y=Math.random()*s.height,this.size=Math.random()*2+.5,this.speedX=(Math.random()-.5)*.5,this.speedY=(Math.random()-.5)*.5,this.opacity=Math.random()*.5+.2,this.color=["#6366f1","#a855f7","#ec4899"][Math.floor(Math.random()*3)]}update(){this.x+=this.speedX,this.y+=this.speedY,(this.x<0||this.x>s.width)&&(this.speedX*=-1),(this.y<0||this.y>s.height)&&(this.speedY*=-1);const t=p-this.x,o=f-this.y;Math.sqrt(t*t+o*o)<150&&(this.x-=t*.01,this.y-=o*.01)}draw(){c.beginPath(),c.arc(this.x,this.y,this.size,0,Math.PI*2),c.fillStyle=this.color,c.globalAlpha=this.opacity,c.fill(),c.globalAlpha=1}}function E(){i=[];const e=Math.min(80,s.width*s.height/15e3);for(let t=0;t<e;t++)i.push(new T)}function v(){c.clearRect(0,0,s.width,s.height),i.forEach(e=>{e.update(),e.draw()}),i.forEach((e,t)=>{i.slice(t+1).forEach(o=>{const n=e.x-o.x,r=e.y-o.y,d=Math.sqrt(n*n+r*r);d<120&&(c.beginPath(),c.moveTo(e.x,e.y),c.lineTo(o.x,o.y),c.strokeStyle=e.color,c.globalAlpha=.1*(1-d/120),c.lineWidth=.5,c.stroke(),c.globalAlpha=1)})}),requestAnimationFrame(v)}w();E();v();window.addEventListener("resize",()=>{w(),E()});document.addEventListener("mousemove",e=>{p=e.clientX,f=e.clientY;const t=document.querySelector(".custom-cursor"),o=document.querySelector(".cursor-dot");t.style.left=e.clientX+"px",t.style.top=e.clientY+"px",o.style.left=e.clientX+"px",o.style.top=e.clientY+"px"});document.addEventListener("mouseleave",()=>{document.querySelector(".custom-cursor").style.opacity="0",document.querySelector(".cursor-dot").style.opacity="0"});document.addEventListener("mouseenter",()=>{document.querySelector(".custom-cursor").style.opacity="1",document.querySelector(".cursor-dot").style.opacity="1"});const y=document.querySelector(".custom-cursor");document.querySelectorAll("a, button, .project-card, .skill-tag").forEach(e=>{e.addEventListener("mouseenter",()=>y.classList.add("hover")),e.addEventListener("mouseleave",()=>y.classList.remove("hover"))});window.addEventListener("scroll",()=>{const e=document.querySelector(".scroll-progress"),t=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100;e.style.width=t+"%",document.querySelectorAll("[data-parallax]").forEach(o=>{const n=parseFloat(o.dataset.parallax);o.style.transform=`translateY(${window.scrollY*n}px)`})});const x=document.querySelector(".theme-toggle"),g=document.querySelector(".theme-toggle-header"),S=localStorage.getItem("theme")||"dark";document.documentElement.setAttribute("data-theme",S);function u(e){const t=document.querySelector(".controls-panel .icon-sun"),o=document.querySelector(".controls-panel .icon-moon"),n=document.querySelector(".theme-toggle-header .icon-sun"),r=document.querySelector(".theme-toggle-header .icon-moon");t&&o&&(t.style.display=e==="dark"?"block":"none",o.style.display=e==="light"?"block":"none"),n&&r&&(n.style.display=e==="dark"?"block":"none",r.style.display=e==="light"?"block":"none")}u(S);x.addEventListener("click",()=>{const t=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),u(t),l("click")});g&&g.addEventListener("click",()=>{const t=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),u(t),l("click")});let a=localStorage.getItem("sound")!=="false";const b=document.querySelector(".sound-toggle");document.querySelector(".icon-sound-on").style.display=a?"block":"none";document.querySelector(".icon-sound-off").style.display=a?"none":"block";b.addEventListener("click",()=>{a=!a,localStorage.setItem("sound",a),document.querySelector(".icon-sound-on").style.display=a?"block":"none",document.querySelector(".icon-sound-off").style.display=a?"none":"block"});function l(e){if(!a)return;const t=new(window.AudioContext||window.webkitAudioContext),o=t.createOscillator(),n=t.createGain();o.connect(n),n.connect(t.destination),e==="click"?(o.frequency.value=800,n.gain.setValueAtTime(.1,t.currentTime),n.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),o.start(t.currentTime),o.stop(t.currentTime+.1)):e==="hover"&&(o.frequency.value=600,n.gain.setValueAtTime(.05,t.currentTime),n.gain.exponentialRampToValueAtTime(.01,t.currentTime+.05),o.start(t.currentTime),o.stop(t.currentTime+.05))}document.querySelectorAll("a, button").forEach(e=>{e.addEventListener("mouseenter",()=>l("hover"))});document.addEventListener("keydown",e=>{e.key.toLowerCase()==="c"&&(document.getElementById("contact")?.scrollIntoView({behavior:"smooth"}),l("click")),e.key.toLowerCase()==="v"&&(A(),l("click"))});function A(){document.getElementById("statsModal").classList.add("active"),L()}function m(){document.getElementById("statsModal").classList.remove("active")}document.querySelector(".stats-close").addEventListener("click",m);document.querySelector(".stats-backdrop").addEventListener("click",m);document.addEventListener("keydown",e=>{e.key==="Escape"&&m()});function L(){document.querySelectorAll(".stat-value").forEach(e=>{const t=parseInt(e.dataset.count),o=1500,n=performance.now();function r(d){const k=d-n,h=Math.min(k/o,1),q=1-Math.pow(1-h,3);e.textContent=Math.floor(t*q),h<1&&requestAnimationFrame(r)}requestAnimationFrame(r)})}setTimeout(()=>{document.getElementById("easterEggHint").classList.add("show")},5e3);setTimeout(()=>{document.getElementById("easterEggHint").classList.remove("show")},12e3);window.addEventListener("load",()=>{const e=document.querySelector(".loader");setTimeout(()=>{e.classList.add("loaded"),setTimeout(()=>{e.remove()},600)},1200)});const M=document.querySelectorAll("[data-typing]");M.forEach(e=>{const t=e.getAttribute("data-typing");if(t){e.textContent="";let o=0;const n=()=>{o<t.length&&(e.textContent+=t.charAt(o),o++,setTimeout(n,80))};setTimeout(n,500)}});
